@import "compass";
@import "wpsstm-shared";

[itemprop="track"]{
    [itemprop="byArtist"]{
        font-weight: bold;
    }
    [itemprop="name"]{
    }
    [itemprop="inAlbum"]{
        font-size:.8em;
    }

    .trackitem_order{
        .wpsstm-player-icon-buffering{
            display:none;
        }
        span{
            display:initial;
        }
    }
    
    .trackitem_actions{
        .wpsstm-track-action{
            margin: 0 .1em;
        }
    }
    
    .wpsstm-player-sources-list{
        li{
            &:not(.wpsstm-bad-source) .wpsstm-source-error{
                display:none;
            }
        }
    }

    &.buffering{
        .trackitem_order{
            .wpsstm-player-icon-buffering{
                display:inline-block;
            }
            span{
                display:none;
            }
        }
    }
    &.playing .wpsstm-play-track, &.active .wpsstm-play-track{
        .wpsstm-player-icon{
            display:none;
        }
        .wpsstm-player-icon-pause{
            display:inline-block;
        }
    }

    &.error .wpsstm-play-track{
        .wpsstm-player-icon{
            display:none;
        }
        .wpsstm-player-icon-error{
            display:inline-block;
        }
    }
    
    &.active{
        &:not(.error){
            @include opacity(1);
        }
        
        &.buffering{
            @include opacity(.75);
            pointer-events: none;
        }
        
        .wpsstm-player-sources-list{
            li{
                &.wpsstm-active-source{
                    font-weight: bold;
                }
            }
        }
        &:not([data-wpsstm-sources-count="0"]):not([data-wpsstm-sources-count="1"]){
            .wpsstm-player-sources-list{
                li{
                    @extend .wpsstm-can-click;
                }
            }
        }
    }
}

a.wpsstm-play-track{
    text-decoration:none;
    border-bottom:none!important; //twentyfifteen fix

    .wpsstm-player-icon{
        display:none;
        &.wpsstm-player-icon-play{
            display:inline-block;
        }
    }
}

.toggle-children-container{
    .wpsstm-tracklist{
        margin:0;
    }
    //more - less
    .toggle-children-link{
        @extend .wpsstm-icon-link;
        display: block;
        width: 100%;
        text-decoration: none;
        border-bottom: none;
        text-align: center;
        font-weight: bold;
        font-size: 1.5em;
        small{
            font-size: .5em;
            line-height: 1em;
            vertical-align: middle;
        }
    }
}



.wpsstm-tracklist{
    
    position:relative;
    font-family: sans-serif;
    padding: 1em 0;
    font-size:.8em;
    margin-bottom: 2em;
    
    table{
        font-size:1em;
        width: 100%;
        display: table;
        border-collapse: collapse;
        border:none;
        margin:0;

        .column-trackitem_order{
            width:3em;
            text-align:center;
        }

        .column-trackitem_play_bt{
            width:2em;
            text-align:center;
        }

        .column-trackitem_image{
            width:2em;
            display:none;
            img{
                max-width:100%;
            }
        }
        .column-trackitem_sources{
            display:none;
            ul{
                list-style-type: none;
            }
        }

        th,td{
            border:none;
        }

        th{
            font-weight: 400;
        }

        thead{
            /*
            display: table-header-group;
            vertical-align: middle;
            border-color: inherit;
            th{
                border-bottom: 1px solid #e1e1e1;
                text-align:center;
            }
            */
            display:none;
        }
        tfoot{
            th{
                border-top: 1px solid #e1e1e1;
            }
        }

        tbody tr{

            @include transition-property(background);
            @include transition-duration(.4s);

            &:nth-child(odd){
                background: rgba(0,0,0,0.0125);
            }
            &:hover{
                background: rgba(0,0,0,0.025);
                td.column-image img{
                    @include opacity(0.8);
                }
            }

            &.no-items{
                .wpsstm-bottom-refresh-notice{
                    display:inline;
                }
            }
            &:not(.no-items):not(:last-child){
                border-bottom: 1px solid #eee;
            }

            &[itemprop="track"]:not(.no-items){
            }

            td{
                font-size: 1em;
                line-height: 2em;
                padding: .5em;
                &.column-image{
                    width: 50px;
                    padding:0;
                    img{
                        max-width: 100%;
                        @include opacity(0.2);
                        @include transition-property(opacity);
                        @include transition-duration(.4s);
                    }
                }
            }
       }

    }
    
    > ol, ul{
        li[itemprop="track"]{
            [itemprop="name"]{
                &:before{
                    content: "â€“ ";
                }
                
            }
        }
    }
    
    .tracklist-nav{
        padding:.5em;
        .tablenav-pages{
            line-height:3em;
        }
        .wpsstm-tracklist-time{
            margin-left: .5em;
        }
        .wpsstm-tracklist-actions{
            font-size:0.8em;
            > * {
                display:inline-block;
            }
            a{
                text-decoration: none;
            }
            form{
                select{
                    font-size:1em;
                }
            }
        }
    }
    
    
    &[data-tracks-count="1"]{
        .tracklist-nav{
            display:none;
        }
        
    }
    
    &.loading{
        pointer-events: none;
        @include opacity(.5);
    }
    
    .wpsstm-tracklist-time{

        .wpsstm-refresh-playlist{
            i.fa-exclamation-triangle{ //error
                display:none;
            }
        }
    }

    &:not([data-wpsstm-expire-sec="0"]), &.loading{
        .wpsstm-tracklist-time .wpsstm-refresh-playlist{
            display:none;
        }
    }
    
    &[data-wpsstm-expire-sec="0"]{
        .wpsstm-tracklist-refresh-time{
            display:none;
        }
    }
    
    &.error{
        .wpsstm-tracklist-time{
            .wpsstm-refresh-playlist{
                i.fa-exclamation-triangle{ //error
                    display:inline-block;
                }
            }
        }
    }
    
}

.wpsstm-track-action-love-unlove,.wpsstm-playlist-action-love-unlove{ //both for playlists & tracks
    span{
        display:none;
    }
    a{
        border:none!important;
    }
    > :nth-child(1){ //loading
        display:none;
    }
    > :nth-child(2){ //love
        display:inline-block;
    }
    > :nth-child(3){ //unlove
        display:none;
    }

    &.wpsstm-is-loved{
        > :nth-child(2){ //love
            display:none;
        }
        > :nth-child(3){ //unlove
            display:inline-block;
        }
    }
    &.loading{
        pointer-events: none;
        > :nth-child(1){ //loading
            display:inline-block;
        }
        > :nth-child(2){ //love
            display:none;
        }
        > :nth-child(3){ //unlove
            display:none;
        }
    }    
}

.wpsstm-track-action-playlists-selector{
    span{
        display:none;
    }
    a{
        border:none!important;
    }
    > :nth-child(1){ //loading
        display:none;
    }
    > :nth-child(2){ //love
        display:inline-block;
    }

    &.wpsstm-is-loved{
        > :nth-child(2){ //love
            display:none;
        }
    }
    &.loading{
        pointer-events: none;
        > :nth-child(1){ //loading
            display:inline-block;
        }
        > :nth-child(2){ //love
            display:none;
        }
    }
}

#wpsstm-tracklist-chooser-list{ //popup
    #wpsstm-filter-playlists{
        position:relative;
        ul{
            font-size:.8em;
            list-style: none;
            @include column-count(2);
            li{
                @extend .ellipsis;
            }
        }
    }

    #wpsstm-new-playlist-adder{
        #wpsstm-new-playlist-add{
            display:none;
            margin: 1em;
            text-align: center;

            input[type="text"]{
                width: 80%;
            }

            input[type="submit"]{
                width: 15%;
                margin-left: 5%;
            } 
        }
    }
    &.loading{
        pointer-events: none;
        @include opacity(.5);
    }

}

.wpsstm-lastfm-love-unlove-track-links{
    font-size:1em!important;
    @include opacity(.3);
    &.wpsstm-is-loved,&.loading{
    }
}

.trackitem_actions{
    
}
