@import "compass/css3";

.truncate {
    /*
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    */
}

[itemprop="track"]{
    [itemprop="byArtist"]{
        font-weight: bold;
    }
    [itemprop="name"]{
    }
    [itemprop="inAlbum"]{
        font-size:.8em;
    }
}

.wpsstm-tracklist-table{
    tbody{
        tr{
            
            &.wpsstm-invalid-track{
                background:rgba(255, 0, 0, 0.10);
            }
            
            &[data-wpsstm-sources-count="0"] a.wpsstm-play-track:not(:hover){
                @include opacity(.25);
            }
            &:not(.active) .wpsstm-play-track{
                .wpsstm-player-icon{
                    @include opacity(.25);
                }

            }

            &:hover .wpsstm-play-track{
                .wpsstm-player-icon{
                        @include opacity(1);
                }
            }

            &.buffering .wpsstm-play-track{
                pointer-events: none;

                .wpsstm-player-icon{
                    display:none;
                }
                .wpsstm-player-icon-buffering{
                    display:inline-block;
                }
            }

            &.playing .wpsstm-play-track{
                .wpsstm-player-icon{
                    display:none;
                }
                .wpsstm-player-icon-pause{
                    display:inline-block;
                }
            }

            &.error .wpsstm-play-track{
                .wpsstm-player-icon{
                    display:none;
                }
                .wpsstm-player-icon-error{
                    display:inline-block;
                }
            }

            &.has-played .wpsstm-play-track{
                color:#00b511;
            }
        }
    }
}

a.wpsstm-play-track{
    text-decoration:none;
    border-bottom:none!important; //twentyfifteen fix

    .wpsstm-player-icon{
        display:none;
        &.wpsstm-player-icon-play{
            display:inline-block;
        }
    }
}

#wpsstm-bottom{
    position:fixed;
    width:100%;
    padding:0;
    bottom: 0;
    z-index: 50;
    min-height:0em;
    
    a{
       color:white; 
    }
    
    .wpsstm-bottom-notice{
        font-size:0.8em;
        margin: 0;
        padding: .5em 1em;
        padding-bottom:1.5em;
        background-color:#fcf8e3;
        color:#222;
        display:none;
        a{
            color:#222;
            text-decoration: underline;
        }
        
        &.active{
            display:block;
        }
    }
    
    #wpsstm-bottom-player{
        display:none;
        position: relative;
        color:white;
        font-family:sans-serif;
        #wpsstm-player-actions{
            position: absolute;
            right: 0;
            top: 0;
            width: 10%;
            text-align: right;
            margin-right: .5em;
            > *{
                padding: 0 .25em;
                font-size:1.5em;
                width:calc(10% / 2);
            }
            a{
                @include opacity(0.9);
                color:white;
                text-decoration: none;
                border:none!important;
                &:hover{
                    @include opacity(1);
                }
            }
        }

        #wpsstm-player-trackinfo{
            background:#222;
            line-height:4em;
            height:4em;
            position:relative;
            font-size: 0.8em;
            padding: 0;
            text-transform: uppercase;
            letter-spacing: .05em;
            font-size: .6em;
            [itemprop="track"]{
                display: inline-block!important;
                width: 90%;
                td{
                    display:inline-block;
                    padding: 0 1em;
                    margin: 0;
                    
                    &[itemprop="image"]{
                        padding-left: 0;
                        img {
                            max-height:3em;
                        }
                    }
                    &[itemprop="name"]:before{
                        content:"\002014";
                        padding-right:.5em;
                        @extend .truncate;
                    }
                    &[itemprop="byArtist"]{
                        @extend .truncate;
                    }
                    &[itemprop="inAlbum"]{
                        display:none;
                        @extend .truncate;
                    }
                    
                }
                
                &:not([data-wpsstm-sources-count="0"]):not([data-wpsstm-sources-count="1"]){
                    .wpsstm-player-sources-list{
                        padding-left: 3em;
                        &:before{
                            position:absolute;
                            font-family: FontAwesome;
                            content: "\f077"; //chevron up
                            left: 0;
                            display: block;
                            width: 3em;
                            text-align: center;
                            bottom: 0;
                        }
                    }
                    .trackitem_sources:hover{
                        ul.wpsstm-player-sources-list{
                            &:before{
                                content: "";
                            }
                            background:rgba(34, 34, 34, 0.95);
                            @include opacity(1);
                            position:absolute;
                            bottom:-2em;
                            padding: 1em 2em;
                            padding-bottom: 0;
                            li{
                                display: block;
                                padding: .5em 0;
                            }
                        }
                    }
                }
                
            }

            .column-trackitem_sources{
                padding: 0;
                margin:0;
                line-height: 2em;
                width: 20%;
                position:relative;
                ul.wpsstm-player-sources-list{
                    position:relative;
                    display:block;
                    font-size:.85em;
                    padding: 0;
                    margin:0;
                    list-style-type: none;
                    @include opacity(.3);
                    padding: 0 2em;
                    
                    li{
                        display:none;
                        @include opacity(.75);
                        position:relative;
                        .wpsstm-source-title{
                            cursor: pointer;
                            cursor: hand;
                            display:inline;
                        }
                        &:hover{
                            @include opacity(.9);
                        }

                        &.wpsstm-active-source{
                            @include opacity(1);
                            display:inline-block;
                        }
                        &.wpsstm-bad-source{
                            //text-decoration: line-through;
                            display:none!important;
                        }

                        a.wpsstm-source-provider-link{
                            font-size:2em;
                            position:absolute;
                        }
                        span{
                            padding-left:3.5em;
                            display: inline-block;
                            width: calc(100% - 3.5em);
                            white-space: nowrap;
                            overflow: hidden;
                            text-overflow: ellipsis;
                        }

                    }
                    &:hover{
                        @include opacity(1);
                    }
                }

            }
        }

        #wpsstm-player-wrapper{
            background:#222;
            position:relative;
            overflow: auto;
            a{
                color:white;
            }

            > * {
                display: block;
                height: 40px;
                float: left;
                line-height:40px;
            }
            .wpsstm-player-extra{
                width:calc(20% / 6); //number of extra icons
                text-align:center;
                &#wpsstm-player-shuffle:not(.active){
                    @include opacity(.3);
                }
                &#wpsstm-player-loop:not(.active){
                    @include opacity(.3);
                }
            }
            #wpsstm-player{
                width:80%;
                margin:auto;
            }
        }
    }
}

#wpsstm-player-toggle-scrobble{
    > :nth-child(1){ //loading
        display:none;
    }
    > :nth-child(2){ //disable
        display:none;
        
    }
    > :nth-child(3){ //enable
        display:inline-block;
        i{
            @include opacity(.25);
        }
    }

    &.active{
        > :nth-child(2){ //disable
            display:inline-block;
        }
        > :nth-child(3){ //enable
            display:none;
        }
    }
    &.loading{
        pointer-events: none;
        > :nth-child(1){ //loading
            display:inline-block;
        }
        > :nth-child(2){ //disable
            display:none;
        }
        > :nth-child(3){ //enable
            display:none;
        }
    }
}

.wpsstm-love-unlove-track-links,.wpsstm-love-unlove-playlist-links{
    span{
        display:none;
    }
    a{
        border:none!important;
    }
    > :nth-child(1){ //loading
        display:none;
    }
    > :nth-child(2){ //love
        display:inline-block;
    }
    > :nth-child(3){ //unlove
        display:none;
    }

    &.wpsstm-is-loved{
        > :nth-child(2){ //love
            display:none;
        }
        > :nth-child(3){ //unlove
            display:inline-block;
        }
    }
    &.loading{
        pointer-events: none;
        > :nth-child(1){ //loading
            display:inline-block;
        }
        > :nth-child(2){ //love
            display:none;
        }
        > :nth-child(3){ //unlove
            display:none;
        }
    }    
}

.wpsstm-lastfm-love-unlove-track-links{
    font-size:1em!important;
    @include opacity(.3);
    &.wpsstm-is-loved,&.loading{
    }
}
